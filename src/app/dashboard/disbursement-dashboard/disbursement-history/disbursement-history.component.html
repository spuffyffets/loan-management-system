<div class="container mt-4">
  <h2 class="mb-3">Disbursement History</h2>

  <div *ngIf="loading" class="alert alert-info">
    Loading disbursement history...
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <!-- Table -->
  <table class="table table-striped table-bordered shadow" *ngIf="disbursements.length > 0 && !loading">
    <thead class="table-primary">
      <tr>
        <th>ID</th>
        <th>Loan Application ID</th>
        <th>Applicant Name</th>
        <th>Loan Amount</th>
        <th>Approved Amount</th>
        <th>Disbursed Amount</th>
        <th>Disbursement Date</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dis of disbursements">
        <td>{{ dis.id }}</td>
        <td>{{ dis.loanAppId || dis.loanApplicationId }}</td>
        <td>{{ dis.applicantName }}</td>
        <td>{{ dis.loanAmount | currency:'INR' }}</td>
        <td>{{ dis.approvedAmount | currency:'INR' }}</td>
        <td>{{ dis.disbursedAmount | currency:'INR' }}</td>
        <td>{{ dis.disbursementDate | date:'mediumDate' }}</td>
        <td>
          <span class="badge"
            [ngClass]="{
              'bg-success': dis.disbursementStatus === 'DISBURSED',
              'bg-primary': dis.disbursementStatus === 'APPROVED',
              'bg-warning': dis.disbursementStatus === 'PENDING',
              'bg-danger': dis.disbursementStatus === 'REJECTED',
              'bg-info': dis.disbursementStatus === 'PROCESSING'
            }"
          >
            {{ dis.disbursementStatus }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="disbursements.length === 0 && !loading && !errorMessage" class="alert alert-info">
    No disbursement history found.
  </div>
</div>
